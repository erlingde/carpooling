(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{268:function(e,t,n){e.exports=n(556)},273:function(e,t,n){},303:function(e,t){},325:function(e,t){},327:function(e,t){},532:function(e,t,n){},556:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),l=n(9),c=n.n(l),i=(n(273),n(75)),o=n(49),s=n.n(o),d=n(111),h=n(248),u=n(249),f=n(263),m=n(250),p=n(264),g=n(25),v=n(560),E=n(561),y=n(247),b=n(246),k=n(39),x=n(245),R=n(559),F=n(112),w=n.n(F),j={fetchRideRequests:function(){try{var e=w()("http://apis.is/rides/samferda-drivers/"),t=w()("http://apis.is/rides/samferda-passengers/");return Promise.all([t,e])}catch(n){console.error(n)}},fetchURL:function(e){try{var t=w()("https://cors.io/?".concat(e));return Promise.resolve(t)}catch(n){console.error(n)}}},C=n(251),O=n.n(C),T=function(e){var t=O.a.load(e),n=t("tr:nth-child(6)").children()[1].children[0]?t("tr:nth-child(6)").children()[1].children[0].data:void 0,r=t("tr:nth-child(7)").children()[1].children[0]?t("tr:nth-child(7)").children()[1].children[0].data:void 0,l=t("tr:nth-child(8)").children()[1].children[0]?t("tr:nth-child(8)").children()[1].children[0].data:void 0,c=t("tr:nth-child(9)").children()[1].children[0]?t("tr:nth-child(9)").children()[1].children[0].data:void 0,i=t("tr:nth-child(11)").children()[1].children[0]?t("tr:nth-child(11)").children()[1].children[0].data:void 0,o=t("tr:nth-child(12)").children()[1].children[0]?t("tr:nth-child(12)").children()[1].children[0].data:void 0;return a.a.createElement("div",null,n&&a.a.createElement("p",null,a.a.createElement("b",null,"Seats: "),n),r&&a.a.createElement("p",null,a.a.createElement("b",null,"Name: ")," ",r),l&&a.a.createElement("p",null,a.a.createElement("b",null,"Phone: "),l),c&&a.a.createElement("p",null,a.a.createElement("b",null,"Mobile: "),c),i&&a.a.createElement("p",null,a.a.createElement("b",null,"Non Smoke Car: "),i),o&&a.a.createElement("p",null,a.a.createElement("b",null,"Notes: "),o))},I=n(557),L=n(558),S=[{title:"From",dataIndex:"from",key:"from"},{title:"To",dataIndex:"to",key:"to"},{title:"Date",key:"date",dataIndex:"date"},{title:function(){return a.a.createElement("span",null,a.a.createElement(b.a,{title:"Time"},a.a.createElement(k.a,{type:"clock-circle"})))},key:"time",dataIndex:"time"},{title:"Details",key:"link",dataIndex:"link",render:function(e,t){return a.a.createElement("span",null,a.a.createElement("a",{href:t.link,rel:"noopener noreferrer",target:"_blank"},"Samfer\xf0a"),a.a.createElement(I.a,{type:"vertical"}),a.a.createElement(L.a,{content:t.details?t.details:a.a.createElement(k.a,{type:"loading",style:{fontSize:16},spin:!0})},a.a.createElement(k.a,{type:"info-circle"})))}}],q=(n(532),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).populateLocations=function(e,t){return e.forEach(function(e){""===e.from||t.find(function(t){return e.from===t})?""===e.to||t.find(function(t){return e.to===t})||t.push(e.to):t.push(e.from)}),t},n.onRadioChange=function(e){var t=n.state,r=t.fetchedRideRequests,a=t.fetchedPassengerRequests;n.selectedFilterFrom=[],n.selectedFilterTo=[],n.setState({filteredTrips:"ride"===e.target.value?r:a,tripFilter:e.target.value})},n.handleRefreshHoverEnter=function(e){n.state.refreshIconClicked||n.setState({refreshIconHover:!0})},n.handleRefreshHoverLeave=function(e){n.setState({refreshIconHover:!1})},n.handleFilterChange=function(e,t){var r=Object(g.a)(Object(g.a)(n)).filterLocations;console.log(e),console.log(t),"from"===t?n.selectedFilterFrom=e:n.selectedFilterTo=e;var a=r(t);n.setState({filteredTrips:a})},n.handleRefreshClick=function(){var e=n.state.refreshIconClicked,t=Object(g.a)(Object(g.a)(n)).fetchData;e||(n.setState({refreshIconClicked:!0},Object(d.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setInterval(function(){n.setState({secondsUntilRefresh:--n.refreshTimer}),0===n.refreshTimer&&clearInterval(t)},1e3);case 2:return t=e.sent,e.next=5,setTimeout(function(){n.refreshTimer=5,n.setState({refreshIconClicked:!1,secondsUntilRefresh:5})},5e3);case 5:case"end":return e.stop()}},e,this)}))),t())},n.filterLocations=function(e){var t=n.state,r=t.tripFilter,a=t.fetchedPassengerRequests,l=t.fetchedRideRequests,c=Object(g.a)(Object(g.a)(n)),i=c.selectedFilterFrom,o=c.selectedFilterTo,s=[],d="ride"===r?l:a;return 0===i.length&&0===o.length?"passenger"===r?a:l:(d.forEach(function(e){0!==i.length&&0!==o.length?i.includes(e.from)&&o.includes(e.to)&&s.push(e):(i.includes(e.from)||o.includes(e.to))&&s.push(e)}),s)},n.fetchData=function(){var e=n.state.tripFilter,t=Object(g.a)(Object(g.a)(n)).populateLocations;n.selectedFilterFrom=[],n.selectedFilterTo=[],n.setState({tableLoading:!0,refreshIconHover:!1},Object(d.a)(s.a.mark(function r(){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j.fetchRideRequests().then(function(r){var a=r[0].data.results,l=r[1].data.results;Object(i.a)(l).concat(Object(i.a)(a)).forEach(function(e){e.key=e.link});var c=t(Object(i.a)(a).concat(Object(i.a)(l)),[]);n.setState({fetchedPassengerRequests:l,fetchedRideRequests:a,filteredTrips:"passenger"===e?l:a,locations:c.sort(),tableLoading:!1})});case 2:case"end":return r.stop()}},r,this)})))},n.selectedFilterFrom=[],n.selectedFilterTo=[],n.refreshTimer=5,n.state={tripFilter:"ride",fetchedPassengerRequests:[],fetchedRideRequests:[],locations:[],filteredTrips:[],tableLoading:!0,refreshIconHover:!1,refreshIconClicked:!1,secondsUntilRefresh:5},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.filteredTrips,r=t.locations,l=t.tableLoading,c=t.refreshIconHover,i=t.refreshIconClicked,o=t.secondsUntilRefresh,h=this.handleFilterChange,u=this.onRadioChange,f=this.handleRefreshHoverEnter,m=this.handleRefreshHoverLeave,p=this.tripFilter,g=this.selectedFilterFrom,F=this.selectedFilterTo,w=this.handleRefreshClick;return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(v.a,{type:"flex",justify:"center"},a.a.createElement(E.a,{xs:24,md:20,lg:18,xl:14},a.a.createElement("h1",{style:{color:"yellow",borderBottom:"1px solid yellow"}},"Carpooling in Iceland"))),a.a.createElement(v.a,{type:"flex",justify:"center"},a.a.createElement(E.a,{xs:24,md:20,lg:18,xl:14},a.a.createElement(y.a.Group,{size:"large",onChange:u,defaultValue:"ride",buttonStyle:"solid",style:{verticalAlign:"top"}},a.a.createElement(b.a,{title:"Passengers seeking rides"},a.a.createElement(y.a.Button,{value:"ride",checked:"ride"===p},"Ride",a.a.createElement(k.a,{type:"car",style:{marginLeft:"6px"}}))),a.a.createElement(b.a,{title:"Drivers seeking passengers"},a.a.createElement(y.a.Button,{value:"passenger",checked:"passenger"===p},"Passengers",a.a.createElement(k.a,{type:"user-add",style:{marginLeft:"6px"}})))),a.a.createElement(b.a,{title:i?"Available to refresh in ".concat(o,"s"):"Refresh"},a.a.createElement(k.a,{type:"sync",spin:c,style:i?{float:"right",marginRight:"15px",cursor:"not-allowed"}:{float:"right",marginRight:"15px",cursor:"pointer"},onClick:w,onMouseEnter:f,onMouseLeave:m})))),a.a.createElement(v.a,{type:"flex",justify:"center"},a.a.createElement(E.a,{xs:12,md:10,lg:9,xl:7},a.a.createElement(x.a,{mode:"multiple",style:{width:"100%"},placeholder:"From",onChange:function(e){return h(e,"from")},value:g,allowClear:!0,maxTagCount:2,defaultValue:"All"},r.map(function(e){return a.a.createElement(x.a.Option,{key:e},e)}))),a.a.createElement(E.a,{xs:12,md:10,lg:9,xl:7},a.a.createElement(x.a,{mode:"multiple",style:{width:"100%"},placeholder:"To",onChange:function(e){return h(e,"to")},value:F,allowClear:!0,maxTagCount:2},r.map(function(e){return a.a.createElement(x.a.Option,{key:e},e)})))),a.a.createElement(v.a,{type:"flex",justify:"center"},a.a.createElement(E.a,{xs:24,md:20,lg:18,xl:14},a.a.createElement(R.a,{columns:S,dataSource:n,loading:l,style:{backgroundColor:"#e9ebee"},onRow:function(t){return{onMouseEnter:function(){var n=Object(d.a)(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.details){n.next=3;break}return n.next=3,j.fetchURL(t.link).then(function(n){t.details=T(n.data),e.forceUpdate()});case 3:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()}}})))))}},{key:"componentDidMount",value:function(){this.fetchData()}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[268,2,1]]]);
//# sourceMappingURL=main.7ba57e01.chunk.js.map