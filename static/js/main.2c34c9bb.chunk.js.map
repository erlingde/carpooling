{"version":3,"sources":["services/api.js","services/scraper.js","constants/columns.js","containers/App.js","serviceWorker.js","index.js"],"names":["api","fetchRideRequests","driversPromise","axios","passengersPromise","Promise","all","e","console","error","scraper","scrape","url","request","concat","response","body","$","cheerio","load","log","children","get","data","columns","title","dataIndex","key","react_default","a","createElement","tooltip","icon","type","render","text","record","href","link","rel","target","divider","popover","content","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","populateLocations","results","tempLocations","forEach","item","from","find","x","to","push","onRadioChange","event","_this$state","state","fetchedRideRequests","fetchedPassengerRequests","selectedFilterFrom","selectedFilterTo","setState","filteredTrips","value","tripFilter","handleRefreshHoverEnter","refreshIconClicked","refreshIconHover","handleRefreshHoverLeave","handleFilterChange","filterLocations","assertThisInitialized","filteredLocations","handleRefreshClick","fetchData","asyncToGenerator","regenerator_default","mark","_callee","timer","wrap","_context","prev","next","setInterval","secondsUntilRefresh","refreshTimer","clearInterval","sent","setTimeout","stop","_this$state2","_assertThisInitialize3","tempRequests","selectedRequest","length","includes","tableLoading","_callee2","_context2","then","res","driverRequests","passengerRequests","toConsumableArray","totalLocations","locations","sort","testFunc","_this$state3","className","row","justify","col","xs","md","lg","xl","style","color","borderBottom","es_radio","Group","size","onChange","defaultValue","buttonStyle","verticalAlign","Button","checked","marginLeft","spin","float","marginRight","cursor","onClick","onMouseEnter","onMouseLeave","es_select","mode","width","placeholder","allowClear","maxTagCount","map","Option","table","dataSource","loading","backgroundColor","Component","Boolean","window","location","hostname","match","ReactDOM","src_containers_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2c34c9bb.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst fetchRideRequests = () => {\r\n    try {\r\n        const driversPromise = axios('http://apis.is/rides/samferda-drivers/');\r\n        const passengersPromise = axios('http://apis.is/rides/samferda-passengers/');\r\n  \r\n        return Promise.all([passengersPromise, driversPromise]);\r\n    } catch (e) {\r\n        console.error(e);\r\n    }\r\n\r\n}\r\n\r\nexport default { fetchRideRequests };","import React from 'react';\r\nimport cheerio from 'cheerio';\r\nimport request from 'request';\r\n\r\nconst scrape = (url) => {\r\n    request(`https://cors.io/?${url}`, (error, response, body) => {\r\n        const $ = cheerio.load(body);\r\n\r\n        /*const seats = $('tr:nth-child(6)').children().get(1).children[0].data;\r\n        const name = $('tr:nth-child(7)').children().get(1).children[0].data;\r\n        const phone = $('tr:nth-child(8)').children().get(1).children[0].data;\r\n        const mobile = $('tr:nth-child(9)').children().get(1).children[0].data;\r\n        const email = $('tr:nth-child(10)').children().get(1).children[0].data;\r\n        const nonSmokeCar = $('tr:nth-child(11)').children().get(1).children[0].data;\r\n        const notes = $('tr:nth-child(12)').children().get(1).children[0].data;*/\r\n\r\n        console.log($('tr:nth-child(6)').children().get(1).children[0].data);\r\n\r\n        /*return Promise.all([\r\n            seats,\r\n            name,\r\n            phone,\r\n            mobile,\r\n            email,\r\n            nonSmokeCar,\r\n            notes\r\n        ]);*/\r\n\r\n    });\r\n\r\n}\r\n\r\nexport default { scrape };","import React from 'react';\r\nimport { Icon, Tooltip, Divider, Popover } from 'antd';\r\n\r\nimport scraper from '../services/scraper';\r\n\r\nconst columns = [{\r\n    title: 'From',\r\n    dataIndex: 'from',\r\n    key: 'from',\r\n  }, {\r\n    title: 'To',\r\n    dataIndex: 'to',\r\n    key: 'to',\r\n  }, {\r\n    title: 'Date',\r\n    key: 'date',\r\n    dataIndex: 'date',\r\n  }, {\r\n    title: () => (\r\n      <span>\r\n        <Tooltip title=\"Time\">\r\n          <Icon type=\"clock-circle\"/>\r\n        </Tooltip>\r\n      </span>\r\n    ),\r\n    key: 'time',\r\n    dataIndex: 'time'\r\n  }, {\r\n    title: 'Details',\r\n    key: 'link',\r\n    dataIndex: 'link',\r\n    render: (text, record) => (\r\n      <span>\r\n        <a href={record.link} rel=\"noopener noreferrer\" target=\"_blank\">Samfer√∞a</a>\r\n        <Divider type=\"vertical\" />\r\n        <Popover content={() => scraper.scrape(record.link)}>\r\n          <Icon type=\"info-circle\"/>\r\n        </Popover>\r\n      </span>\r\n    )\r\n  }];\r\n\r\n  export default columns;","import React, { Component } from 'react';\r\nimport { Row, Col, Radio, Select, Table, Icon, Tooltip } from 'antd';\r\n\r\nimport api from '../services/api';\r\nimport scraper from '../services/scraper';\r\n\r\n\r\nimport columns from '../constants/columns'\r\n\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.selectedFilterFrom = [];\r\n    this.selectedFilterTo = [];\r\n    this.refreshTimer = 5;\r\n    \r\n    this.state = {\r\n      tripFilter: 'ride',\r\n      fetchedPassengerRequests: [],\r\n      fetchedRideRequests: [],\r\n      locations: [],\r\n      filteredTrips: [],\r\n      tableLoading: true,\r\n      refreshIconHover: false,\r\n      refreshIconClicked: false,\r\n      secondsUntilRefresh: 5\r\n    };\r\n  };\r\n\r\n  populateLocations = (results, tempLocations) => {\r\n    results.forEach((item) => {\r\n      if (item.from !== \"\" && !tempLocations.find((x) => item.from === x)) {\r\n        tempLocations.push(item.from);\r\n      } else if (item.to !== \"\" && !tempLocations.find((x) => item.to === x)) {\r\n        tempLocations.push(item.to);\r\n      }\r\n    });\r\n\r\n    return tempLocations;\r\n  }\r\n\r\n  onRadioChange = (event) => {\r\n    const { fetchedRideRequests, fetchedPassengerRequests } = this.state;\r\n\r\n    this.selectedFilterFrom = [];\r\n    this.selectedFilterTo = [];\r\n\r\n    this.setState({\r\n      filteredTrips: event.target.value === 'ride' ? fetchedRideRequests : fetchedPassengerRequests,\r\n      tripFilter: event.target.value\r\n    });\r\n  }\r\n\r\n  handleRefreshHoverEnter = (event) => {\r\n    const { refreshIconClicked } = this.state;\r\n\r\n    if (refreshIconClicked) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      refreshIconHover: true\r\n    });\r\n  }\r\n\r\n  handleRefreshHoverLeave = (event) => {\r\n    this.setState({\r\n      refreshIconHover: false\r\n    });\r\n  }\r\n\r\n  handleFilterChange = (value, type) => {\r\n    const { filterLocations } = this;\r\n    console.log(value);\r\n    console.log(type);\r\n\r\n    if (type === 'from') {\r\n      this.selectedFilterFrom = value;\r\n    } else {\r\n      this.selectedFilterTo = value;\r\n    }\r\n\r\n    const filteredLocations = filterLocations(type);\r\n\r\n    this.setState({\r\n      filteredTrips: filteredLocations\r\n    });\r\n  }\r\n\r\n  handleRefreshClick = () => {\r\n    const { refreshIconClicked } = this.state;\r\n    const { fetchData } = this;\r\n\r\n    if (refreshIconClicked) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      refreshIconClicked: true\r\n    }, async () => {\r\n      const timer = await setInterval(() => {\r\n        this.setState({\r\n          secondsUntilRefresh: --this.refreshTimer\r\n        });\r\n        if (this.refreshTimer === 0) {\r\n          clearInterval(timer);\r\n        }\r\n      }, 1000);\r\n      \r\n      await setTimeout(() => {\r\n        this.refreshTimer = 5;\r\n        this.setState({\r\n          refreshIconClicked: false,\r\n          secondsUntilRefresh: 5\r\n        });\r\n      }, 5000);\r\n      \r\n    });\r\n    \r\n    fetchData();\r\n  }\r\n\r\n  filterLocations = (type) => {\r\n    const { tripFilter, fetchedPassengerRequests, fetchedRideRequests } = this.state;\r\n    const { selectedFilterFrom, selectedFilterTo } = this;\r\n\r\n    let tempRequests = [];\r\n    const selectedRequest = tripFilter === 'ride' ? fetchedRideRequests : fetchedPassengerRequests;\r\n    \r\n    if (selectedFilterFrom.length === 0 && selectedFilterTo.length === 0) {\r\n      return tripFilter === 'passenger' ? fetchedPassengerRequests : fetchedRideRequests;\r\n    }\r\n\r\n    selectedRequest.forEach(item => {\r\n      if (selectedFilterFrom.length !== 0 && selectedFilterTo.length !== 0) {\r\n        if ((selectedFilterFrom.includes(item.from) && selectedFilterTo.includes(item.to))) {\r\n          tempRequests.push(item);\r\n        }\r\n      } else {\r\n          if (selectedFilterFrom.includes(item.from) || (selectedFilterTo.includes(item.to))) {\r\n            tempRequests.push(item);\r\n          }\r\n        }\r\n    });\r\n\r\n    return tempRequests;\r\n  }\r\n\r\n  fetchData = () => {\r\n    const { tripFilter } = this.state;\r\n    const { populateLocations } = this;\r\n\r\n    // Resets the state to handle refetching of data\r\n    this.selectedFilterFrom = [];\r\n    this.selectedFilterTo = [];\r\n\r\n    this.setState({\r\n      tableLoading: true,\r\n      refreshIconHover: false\r\n    }, async () => {\r\n      await api.fetchRideRequests().then(res => {\r\n        let driverRequests = res[0].data.results;\r\n        let passengerRequests = res[1].data.results;\r\n  \r\n        [...passengerRequests, ...driverRequests].forEach((item) => {\r\n          item.key = item.link\r\n        });\r\n  \r\n        const totalLocations = populateLocations([...driverRequests, ...passengerRequests], []);\r\n\r\n        this.setState({\r\n          fetchedPassengerRequests: passengerRequests,\r\n          fetchedRideRequests: driverRequests,\r\n          filteredTrips: tripFilter === 'passenger' ? passengerRequests : driverRequests,\r\n          locations: totalLocations.sort(),\r\n          tableLoading: false\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { filteredTrips, locations, tableLoading, refreshIconHover, refreshIconClicked, secondsUntilRefresh } = this.state;\r\n    const { handleFilterChange, onRadioChange, handleRefreshHoverEnter, handleRefreshHoverLeave, tripFilter, selectedFilterFrom, selectedFilterTo, handleRefreshClick } = this;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={24} md={20} lg={18} xl={14}>\r\n              <h1 style={{color: 'yellow', borderBottom: '1px solid yellow'}}>\r\n                Carpooling in Iceland\r\n              </h1>\r\n            </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={24} md={20} lg={18} xl={14}>\r\n              <Radio.Group size=\"large\" onChange={onRadioChange} defaultValue=\"ride\" buttonStyle=\"solid\" style={{'verticalAlign': 'top'}}>\r\n              <Tooltip title=\"Passengers seeking rides\">\r\n                  <Radio.Button value=\"ride\" checked={tripFilter === 'ride' ? true : false}>\r\n                    Ride\r\n                    <Icon type=\"car\" style={{'marginLeft': '6px'}}/>\r\n                  </Radio.Button>\r\n              </Tooltip>\r\n              <Tooltip title=\"Drivers seeking passengers\">\r\n                  <Radio.Button value=\"passenger\"checked={tripFilter === 'passenger' ? true : false}>\r\n                      Passengers\r\n                      <Icon type=\"user-add\" style={{'marginLeft': '6px'}}/>\r\n                    </Radio.Button>\r\n              </Tooltip>\r\n              </Radio.Group>\r\n              <Tooltip title={refreshIconClicked ? `Available to refresh in ${secondsUntilRefresh}` : 'Refresh'}>\r\n                <Icon\r\n                  type=\"sync\"\r\n                  spin={refreshIconHover}\r\n                  style={refreshIconClicked ? {'float': 'right','marginRight': '15px', 'cursor': 'not-allowed'} : {'float': 'right','marginRight': '15px' , 'cursor': 'pointer'}}\r\n                  onClick={handleRefreshClick}\r\n                  onMouseEnter={handleRefreshHoverEnter}\r\n                  onMouseLeave={handleRefreshHoverLeave}\r\n                />\r\n              </Tooltip>\r\n            </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={12} md={10} lg={9} xl={7}>\r\n              <Select\r\n                mode=\"multiple\"\r\n                style={{ width: '100%' }}\r\n                placeholder=\"From\"\r\n                onChange={value => handleFilterChange(value, 'from')}\r\n                value={selectedFilterFrom}\r\n                allowClear={true}\r\n                maxTagCount={2}\r\n                defaultValue={'All'}\r\n              >\r\n                {locations.map((item) =>\r\n                  <Select.Option key={item}>{item}</Select.Option>\r\n                )}\r\n              </Select>\r\n            </Col>\r\n            <Col xs={12} md={10} lg={9} xl={7}>\r\n              <Select\r\n                mode=\"multiple\"\r\n                style={{ width: '100%' }}\r\n                placeholder=\"To\"\r\n                onChange={value => handleFilterChange(value, 'to')}\r\n                value={selectedFilterTo}\r\n                allowClear={true}\r\n                maxTagCount={2}\r\n              >\r\n              {locations.map((item) =>\r\n                <Select.Option key={item}>{item}</Select.Option>\r\n              )}\r\n            </Select>\r\n          </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={24} md={20} lg={18} xl={14}>\r\n              <Table\r\n                columns={columns}\r\n                dataSource={filteredTrips}\r\n                loading={tableLoading}\r\n                style={{'backgroundColor': '#e9ebee'}}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n  testFunc = (url) => {\r\n    console.log(scraper.scrape(url));\r\n\r\n\r\n  }\r\n\r\n   componentDidMount() {\r\n    //scraper.scrape('http://www.samferda.net/en/detail/101081');\r\n    this.fetchData();\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './containers/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}