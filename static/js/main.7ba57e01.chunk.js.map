{"version":3,"sources":["services/api.js","services/scraper.js","constants/columns.js","containers/App.js","serviceWorker.js","index.js"],"names":["api","fetchRideRequests","driversPromise","axios","passengersPromise","Promise","all","e","console","error","fetchURL","url","promise","concat","resolve","scraper","data","$","cheerio","load","seats","children","undefined","name","phone","mobile","nonSmokeCar","notes","react_default","a","createElement","columns","title","dataIndex","key","tooltip","icon","type","render","text","record","href","link","rel","target","divider","popover","content","details","style","fontSize","spin","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","populateLocations","results","tempLocations","forEach","item","from","find","x","to","push","onRadioChange","event","_this$state","state","fetchedRideRequests","fetchedPassengerRequests","selectedFilterFrom","selectedFilterTo","setState","filteredTrips","value","tripFilter","handleRefreshHoverEnter","refreshIconClicked","refreshIconHover","handleRefreshHoverLeave","handleFilterChange","filterLocations","assertThisInitialized","log","filteredLocations","handleRefreshClick","fetchData","asyncToGenerator","regenerator_default","mark","_callee","timer","wrap","_context","prev","next","setInterval","secondsUntilRefresh","refreshTimer","clearInterval","sent","setTimeout","stop","_this$state2","_assertThisInitialize3","tempRequests","selectedRequest","length","includes","tableLoading","_callee2","_context2","then","res","driverRequests","passengerRequests","toConsumableArray","totalLocations","locations","sort","_this2","_this$state3","className","row","justify","col","xs","md","lg","xl","color","borderBottom","es_radio","Group","size","onChange","defaultValue","buttonStyle","verticalAlign","Button","checked","marginLeft","float","marginRight","cursor","onClick","onMouseEnter","onMouseLeave","es_select","mode","width","placeholder","allowClear","maxTagCount","map","Option","table","dataSource","loading","backgroundColor","onRow","_onMouseEnter","_callee3","_context3","forceUpdate","apply","arguments","Component","Boolean","window","location","hostname","match","ReactDOM","src_containers_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7ba57e01.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst fetchRideRequests = () => {\r\n    try {\r\n        const driversPromise = axios('http://apis.is/rides/samferda-drivers/');\r\n        const passengersPromise = axios('http://apis.is/rides/samferda-passengers/');\r\n\r\n        return Promise.all([passengersPromise, driversPromise]);\r\n    } catch (e) {\r\n        console.error(e);\r\n    }\r\n\r\n}\r\n\r\nconst fetchURL = (url) => {\r\n    try {\r\n        const promise = axios(`https://cors.io/?${url}`);\r\n        \r\n        return Promise.resolve(promise);\r\n    } catch (e) {\r\n        console.error(e);\r\n    }\r\n}\r\n\r\nexport default { fetchRideRequests, fetchURL };","import React from 'react';\r\nimport cheerio from 'cheerio';\r\n\r\nconst scrapeHtml = (data) => {\r\n    const $ = cheerio.load(data);\r\n\r\n    const seats = !$('tr:nth-child(6)').children()[1].children[0] ? undefined : $('tr:nth-child(6)').children()[1].children[0].data;\r\n    const name = !$('tr:nth-child(7)').children()[1].children[0] ? undefined : $('tr:nth-child(7)').children()[1].children[0].data;\r\n    const phone =  !$('tr:nth-child(8)').children()[1].children[0] ? undefined : $('tr:nth-child(8)').children()[1].children[0].data;\r\n    const mobile = !$('tr:nth-child(9)').children()[1].children[0] ? undefined : $('tr:nth-child(9)').children()[1].children[0].data;\r\n    const nonSmokeCar = !$('tr:nth-child(11)').children()[1].children[0] ? undefined : $('tr:nth-child(11)').children()[1].children[0].data;\r\n    const notes = !$('tr:nth-child(12)').children()[1].children[0] ? undefined : $('tr:nth-child(12)').children()[1].children[0].data;\r\n\r\n    const result = (\r\n        <div>\r\n            {seats && <p><b>Seats: </b>{seats}</p>}\r\n            {name && <p><b>Name: </b> {name}</p>}\r\n            {phone && <p><b>Phone: </b>{phone}</p>}\r\n            {mobile && <p><b>Mobile: </b>{mobile}</p>}\r\n            {nonSmokeCar && <p><b>Non Smoke Car: </b>{nonSmokeCar}</p>}\r\n            {notes && <p><b>Notes: </b>{notes}</p> }    \r\n        </div>\r\n    );\r\n\r\n    return result;\r\n}\r\n\r\nexport default { scrapeHtml };","import React from 'react';\r\nimport { Icon, Tooltip, Divider, Popover } from 'antd';\r\n\r\nconst columns = [{\r\n    title: 'From',\r\n    dataIndex: 'from',\r\n    key: 'from',\r\n  }, {\r\n    title: 'To',\r\n    dataIndex: 'to',\r\n    key: 'to',\r\n  }, {\r\n    title: 'Date',\r\n    key: 'date',\r\n    dataIndex: 'date',\r\n  }, {\r\n    title: () => (\r\n      <span>\r\n        <Tooltip title=\"Time\">\r\n          <Icon type=\"clock-circle\"/>\r\n        </Tooltip>\r\n      </span>\r\n    ),\r\n    key: 'time',\r\n    dataIndex: 'time'\r\n  }, {\r\n    title: 'Details',\r\n    key: 'link',\r\n    dataIndex: 'link',\r\n    render: (text, record) => (\r\n      <span>\r\n        <a href={record.link} rel=\"noopener noreferrer\" target=\"_blank\">Samfer√∞a</a>\r\n        <Divider type=\"vertical\" />\r\n        <Popover content={record.details ? record.details : <Icon type=\"loading\" style={{ fontSize: 16 }} spin />}>\r\n          <Icon type=\"info-circle\"/>\r\n        </Popover>\r\n      </span>\r\n    )\r\n  }];\r\n\r\n  export default columns;","import React, { Component } from 'react';\r\nimport { Row, Col, Radio, Select, Table, Icon, Tooltip } from 'antd';\r\n\r\nimport api from '../services/api';\r\nimport scraper from '../services/scraper';\r\n\r\n\r\nimport columns from '../constants/columns'\r\n\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.selectedFilterFrom = [];\r\n    this.selectedFilterTo = [];\r\n    this.refreshTimer = 5;\r\n    \r\n    this.state = {\r\n      tripFilter: 'ride',\r\n      fetchedPassengerRequests: [],\r\n      fetchedRideRequests: [],\r\n      locations: [],\r\n      filteredTrips: [],\r\n      tableLoading: true,\r\n      refreshIconHover: false,\r\n      refreshIconClicked: false,\r\n      secondsUntilRefresh: 5\r\n    };\r\n  };\r\n\r\n  populateLocations = (results, tempLocations) => {\r\n    results.forEach((item) => {\r\n      if (item.from !== \"\" && !tempLocations.find((x) => item.from === x)) {\r\n        tempLocations.push(item.from);\r\n      } else if (item.to !== \"\" && !tempLocations.find((x) => item.to === x)) {\r\n        tempLocations.push(item.to);\r\n      }\r\n    });\r\n\r\n    return tempLocations;\r\n  }\r\n\r\n  onRadioChange = (event) => {\r\n    const { fetchedRideRequests, fetchedPassengerRequests } = this.state;\r\n\r\n    this.selectedFilterFrom = [];\r\n    this.selectedFilterTo = [];\r\n\r\n    this.setState({\r\n      filteredTrips: event.target.value === 'ride' ? fetchedRideRequests : fetchedPassengerRequests,\r\n      tripFilter: event.target.value\r\n    });\r\n  }\r\n\r\n  handleRefreshHoverEnter = (event) => {\r\n    const { refreshIconClicked } = this.state;\r\n\r\n    if (refreshIconClicked) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      refreshIconHover: true\r\n    });\r\n  }\r\n\r\n  handleRefreshHoverLeave = (event) => {\r\n    this.setState({\r\n      refreshIconHover: false\r\n    });\r\n  }\r\n\r\n  handleFilterChange = (value, type) => {\r\n    const { filterLocations } = this;\r\n    console.log(value);\r\n    console.log(type);\r\n\r\n    if (type === 'from') {\r\n      this.selectedFilterFrom = value;\r\n    } else {\r\n      this.selectedFilterTo = value;\r\n    }\r\n\r\n    const filteredLocations = filterLocations(type);\r\n\r\n    this.setState({\r\n      filteredTrips: filteredLocations\r\n    });\r\n  }\r\n\r\n  handleRefreshClick = () => {\r\n    const { refreshIconClicked } = this.state;\r\n    const { fetchData } = this;\r\n\r\n    if (refreshIconClicked) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      refreshIconClicked: true\r\n    }, async () => {\r\n      const timer = await setInterval(() => {\r\n        this.setState({\r\n          secondsUntilRefresh: --this.refreshTimer\r\n        });\r\n        if (this.refreshTimer === 0) {\r\n          clearInterval(timer);\r\n        }\r\n      }, 1000);\r\n      \r\n      await setTimeout(() => {\r\n        this.refreshTimer = 5;\r\n        this.setState({\r\n          refreshIconClicked: false,\r\n          secondsUntilRefresh: 5\r\n        });\r\n      }, 5000);\r\n      \r\n    });\r\n    \r\n    fetchData();\r\n  }\r\n\r\n  filterLocations = (type) => {\r\n    const { tripFilter, fetchedPassengerRequests, fetchedRideRequests } = this.state;\r\n    const { selectedFilterFrom, selectedFilterTo } = this;\r\n\r\n    let tempRequests = [];\r\n    const selectedRequest = tripFilter === 'ride' ? fetchedRideRequests : fetchedPassengerRequests;\r\n    \r\n    if (selectedFilterFrom.length === 0 && selectedFilterTo.length === 0) {\r\n      return tripFilter === 'passenger' ? fetchedPassengerRequests : fetchedRideRequests;\r\n    }\r\n\r\n    selectedRequest.forEach(item => {\r\n      if (selectedFilterFrom.length !== 0 && selectedFilterTo.length !== 0) {\r\n        if ((selectedFilterFrom.includes(item.from) && selectedFilterTo.includes(item.to))) {\r\n          tempRequests.push(item);\r\n        }\r\n      } else {\r\n          if (selectedFilterFrom.includes(item.from) || (selectedFilterTo.includes(item.to))) {\r\n            tempRequests.push(item);\r\n          }\r\n        }\r\n    });\r\n\r\n    return tempRequests;\r\n  }\r\n\r\n  fetchData = () => {\r\n    const { tripFilter } = this.state;\r\n    const { populateLocations } = this;\r\n\r\n    // Resets the state to handle refetching of data\r\n    this.selectedFilterFrom = [];\r\n    this.selectedFilterTo = [];\r\n\r\n    this.setState({\r\n      tableLoading: true,\r\n      refreshIconHover: false\r\n    }, async () => {\r\n      await api.fetchRideRequests().then(res => {\r\n        let driverRequests = res[0].data.results;\r\n        let passengerRequests = res[1].data.results;\r\n  \r\n        [...passengerRequests, ...driverRequests].forEach((item) => {\r\n          item.key = item.link\r\n        });\r\n  \r\n        const totalLocations = populateLocations([...driverRequests, ...passengerRequests], []);\r\n\r\n        this.setState({\r\n          fetchedPassengerRequests: passengerRequests,\r\n          fetchedRideRequests: driverRequests,\r\n          filteredTrips: tripFilter === 'passenger' ? passengerRequests : driverRequests,\r\n          locations: totalLocations.sort(),\r\n          tableLoading: false\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { filteredTrips, locations, tableLoading, refreshIconHover, refreshIconClicked, secondsUntilRefresh } = this.state;\r\n    const { handleFilterChange, onRadioChange, handleRefreshHoverEnter, handleRefreshHoverLeave, tripFilter, selectedFilterFrom, selectedFilterTo, handleRefreshClick } = this;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={24} md={20} lg={18} xl={14}>\r\n              <h1 style={{color: 'yellow', borderBottom: '1px solid yellow'}}>\r\n                Carpooling in Iceland\r\n              </h1>\r\n            </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={24} md={20} lg={18} xl={14}>\r\n              <Radio.Group size=\"large\" onChange={onRadioChange} defaultValue=\"ride\" buttonStyle=\"solid\" style={{'verticalAlign': 'top'}}>\r\n              <Tooltip title=\"Passengers seeking rides\">\r\n                  <Radio.Button value=\"ride\" checked={tripFilter === 'ride' ? true : false}>\r\n                    Ride\r\n                    <Icon type=\"car\" style={{'marginLeft': '6px'}}/>\r\n                  </Radio.Button>\r\n              </Tooltip>\r\n              <Tooltip title=\"Drivers seeking passengers\">\r\n                  <Radio.Button value=\"passenger\"checked={tripFilter === 'passenger' ? true : false}>\r\n                      Passengers\r\n                      <Icon type=\"user-add\" style={{'marginLeft': '6px'}}/>\r\n                    </Radio.Button>\r\n              </Tooltip>\r\n              </Radio.Group>\r\n              <Tooltip title={refreshIconClicked ? `Available to refresh in ${secondsUntilRefresh}s` : 'Refresh'}>\r\n                <Icon\r\n                  type=\"sync\"\r\n                  spin={refreshIconHover}\r\n                  style={refreshIconClicked ? {'float': 'right','marginRight': '15px', 'cursor': 'not-allowed'} : {'float': 'right','marginRight': '15px' , 'cursor': 'pointer'}}\r\n                  onClick={handleRefreshClick}\r\n                  onMouseEnter={handleRefreshHoverEnter}\r\n                  onMouseLeave={handleRefreshHoverLeave}\r\n                />\r\n              </Tooltip>\r\n            </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={12} md={10} lg={9} xl={7}>\r\n              <Select\r\n                mode=\"multiple\"\r\n                style={{ width: '100%' }}\r\n                placeholder=\"From\"\r\n                onChange={value => handleFilterChange(value, 'from')}\r\n                value={selectedFilterFrom}\r\n                allowClear={true}\r\n                maxTagCount={2}\r\n                defaultValue={'All'}\r\n              >\r\n                {locations.map((item) =>\r\n                  <Select.Option key={item}>{item}</Select.Option>\r\n                )}\r\n              </Select>\r\n            </Col>\r\n            <Col xs={12} md={10} lg={9} xl={7}>\r\n              <Select\r\n                mode=\"multiple\"\r\n                style={{ width: '100%' }}\r\n                placeholder=\"To\"\r\n                onChange={value => handleFilterChange(value, 'to')}\r\n                value={selectedFilterTo}\r\n                allowClear={true}\r\n                maxTagCount={2}\r\n              >\r\n              {locations.map((item) =>\r\n                <Select.Option key={item}>{item}</Select.Option>\r\n              )}\r\n            </Select>\r\n          </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Col xs={24} md={20} lg={18} xl={14}>\r\n              <Table\r\n                columns={columns}\r\n                dataSource={filteredTrips}\r\n                loading={tableLoading}\r\n                style={{'backgroundColor': '#e9ebee'}}\r\n                onRow={record => {\r\n                  return {\r\n                    onMouseEnter: async () => {\r\n                      if (!record.details) {\r\n                        await api.fetchURL(record.link).then(res => {\r\n                          record.details = scraper.scrapeHtml(res.data);\r\n                          this.forceUpdate();\r\n                       });\r\n                      }\r\n                    }\r\n                  }\r\n                }}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './containers/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}