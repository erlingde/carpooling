(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{395:function(e,t,a){e.exports=a(876)},400:function(e,t,a){},430:function(e,t){},452:function(e,t){},454:function(e,t){},639:function(e,t){},640:function(e,t){},706:function(e,t){},852:function(e,t,a){},876:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(9),l=a.n(o),c=(a(400),a(117)),s=a(116),i=a.n(s),d=a(235),u=a(374),f=a(375),h=a(390),m=a(376),p=a(391),g=a(40),v=a(880),E=a(881),y=a(159),k=a(158),x=a(70),R=a(157),b=a(879),F=a(236),j=a.n(F),w={fetchRideRequests:function(){try{var e=j()("http://apis.is/rides/samferda-drivers/"),t=j()("http://apis.is/rides/samferda-passengers/");return Promise.all([t,e])}catch(a){console.error(a)}}},C=a(377),O=a.n(C),T=a(378),I=a.n(T),L={scrape:function(e){I()("https://cors.io/?".concat(e),function(e,t,a){var n=O.a.load(a);console.log(n("tr:nth-child(6)").children().get(1).children[0].data)})}},S=a(877),q=a(878),H=[{title:"From",dataIndex:"from",key:"from"},{title:"To",dataIndex:"to",key:"to"},{title:"Date",key:"date",dataIndex:"date"},{title:function(){return r.a.createElement("span",null,r.a.createElement(k.a,{title:"Time"},r.a.createElement(x.a,{type:"clock-circle"})))},key:"time",dataIndex:"time"},{title:"Details",key:"link",dataIndex:"link",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:t.link,rel:"noopener noreferrer",target:"_blank"},"Samfer\xf0a"),r.a.createElement(S.a,{type:"vertical"}),r.a.createElement(q.a,{content:function(){return L.scrape(t.link)}},r.a.createElement(x.a,{type:"info-circle"})))}}],D=(a(852),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).populateLocations=function(e,t){return e.forEach(function(e){""===e.from||t.find(function(t){return e.from===t})?""===e.to||t.find(function(t){return e.to===t})||t.push(e.to):t.push(e.from)}),t},a.onRadioChange=function(e){var t=a.state,n=t.fetchedRideRequests,r=t.fetchedPassengerRequests;a.selectedFilterFrom=[],a.selectedFilterTo=[],a.setState({filteredTrips:"ride"===e.target.value?n:r,tripFilter:e.target.value})},a.handleRefreshHoverEnter=function(e){a.state.refreshIconClicked||a.setState({refreshIconHover:!0})},a.handleRefreshHoverLeave=function(e){a.setState({refreshIconHover:!1})},a.handleFilterChange=function(e,t){var n=Object(g.a)(Object(g.a)(a)).filterLocations;console.log(e),console.log(t),"from"===t?a.selectedFilterFrom=e:a.selectedFilterTo=e;var r=n(t);a.setState({filteredTrips:r})},a.handleRefreshClick=function(){var e=a.state.refreshIconClicked,t=Object(g.a)(Object(g.a)(a)).fetchData;e||(a.setState({refreshIconClicked:!0},Object(d.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setInterval(function(){a.setState({secondsUntilRefresh:--a.refreshTimer}),0===a.refreshTimer&&clearInterval(t)},1e3);case 2:return t=e.sent,e.next=5,setTimeout(function(){a.refreshTimer=5,a.setState({refreshIconClicked:!1,secondsUntilRefresh:5})},5e3);case 5:case"end":return e.stop()}},e,this)}))),t())},a.filterLocations=function(e){var t=a.state,n=t.tripFilter,r=t.fetchedPassengerRequests,o=t.fetchedRideRequests,l=Object(g.a)(Object(g.a)(a)),c=l.selectedFilterFrom,s=l.selectedFilterTo,i=[],d="ride"===n?o:r;return 0===c.length&&0===s.length?"passenger"===n?r:o:(d.forEach(function(e){0!==c.length&&0!==s.length?c.includes(e.from)&&s.includes(e.to)&&i.push(e):(c.includes(e.from)||s.includes(e.to))&&i.push(e)}),i)},a.fetchData=function(){var e=a.state.tripFilter,t=Object(g.a)(Object(g.a)(a)).populateLocations;a.selectedFilterFrom=[],a.selectedFilterTo=[],a.setState({tableLoading:!0,refreshIconHover:!1},Object(d.a)(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.fetchRideRequests().then(function(n){var r=n[0].data.results,o=n[1].data.results;Object(c.a)(o).concat(Object(c.a)(r)).forEach(function(e){e.key=e.link});var l=t(Object(c.a)(r).concat(Object(c.a)(o)),[]);a.setState({fetchedPassengerRequests:o,fetchedRideRequests:r,filteredTrips:"passenger"===e?o:r,locations:l.sort(),tableLoading:!1})});case 2:case"end":return n.stop()}},n,this)})))},a.testFunc=function(e){console.log(L.scrape(e))},a.selectedFilterFrom=[],a.selectedFilterTo=[],a.refreshTimer=5,a.state={tripFilter:"ride",fetchedPassengerRequests:[],fetchedRideRequests:[],locations:[],filteredTrips:[],tableLoading:!0,refreshIconHover:!1,refreshIconClicked:!1,secondsUntilRefresh:5},a}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.filteredTrips,a=e.locations,n=e.tableLoading,o=e.refreshIconHover,l=e.refreshIconClicked,c=e.secondsUntilRefresh,s=this.handleFilterChange,i=this.onRadioChange,d=this.handleRefreshHoverEnter,u=this.handleRefreshHoverLeave,f=this.tripFilter,h=this.selectedFilterFrom,m=this.selectedFilterTo,p=this.handleRefreshClick;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(v.a,{type:"flex",justify:"center"},r.a.createElement(E.a,{xs:24,md:20,lg:18,xl:14},r.a.createElement("h1",{style:{color:"yellow",borderBottom:"1px solid yellow"}},"Carpooling in Iceland"))),r.a.createElement(v.a,{type:"flex",justify:"center"},r.a.createElement(E.a,{xs:24,md:20,lg:18,xl:14},r.a.createElement(y.a.Group,{size:"large",onChange:i,defaultValue:"ride",buttonStyle:"solid",style:{verticalAlign:"top"}},r.a.createElement(k.a,{title:"Passengers seeking rides"},r.a.createElement(y.a.Button,{value:"ride",checked:"ride"===f},"Ride",r.a.createElement(x.a,{type:"car",style:{marginLeft:"6px"}}))),r.a.createElement(k.a,{title:"Drivers seeking passengers"},r.a.createElement(y.a.Button,{value:"passenger",checked:"passenger"===f},"Passengers",r.a.createElement(x.a,{type:"user-add",style:{marginLeft:"6px"}})))),r.a.createElement(k.a,{title:l?"Available to refresh in ".concat(c):"Refresh"},r.a.createElement(x.a,{type:"sync",spin:o,style:l?{float:"right",marginRight:"15px",cursor:"not-allowed"}:{float:"right",marginRight:"15px",cursor:"pointer"},onClick:p,onMouseEnter:d,onMouseLeave:u})))),r.a.createElement(v.a,{type:"flex",justify:"center"},r.a.createElement(E.a,{xs:12,md:10,lg:9,xl:7},r.a.createElement(R.a,{mode:"multiple",style:{width:"100%"},placeholder:"From",onChange:function(e){return s(e,"from")},value:h,allowClear:!0,maxTagCount:2,defaultValue:"All"},a.map(function(e){return r.a.createElement(R.a.Option,{key:e},e)}))),r.a.createElement(E.a,{xs:12,md:10,lg:9,xl:7},r.a.createElement(R.a,{mode:"multiple",style:{width:"100%"},placeholder:"To",onChange:function(e){return s(e,"to")},value:m,allowClear:!0,maxTagCount:2},a.map(function(e){return r.a.createElement(R.a.Option,{key:e},e)})))),r.a.createElement(v.a,{type:"flex",justify:"center"},r.a.createElement(E.a,{xs:24,md:20,lg:18,xl:14},r.a.createElement(b.a,{columns:H,dataSource:t,loading:n,style:{backgroundColor:"#e9ebee"}})))))}},{key:"componentDidMount",value:function(){this.fetchData()}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[395,2,1]]]);
//# sourceMappingURL=main.2c34c9bb.chunk.js.map