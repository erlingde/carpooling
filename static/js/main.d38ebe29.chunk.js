(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{258:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAl5JREFUeNrUl0FIFFEYx9/Mlq7XOpSioq5bRiuhp06CmnXaS146eYkKgsS6dBBR3O6iJ4UOHhREdtmDEOK2lbclD3lQO0R0WAgqKiyCiGan/xv+xrQ7M+7bfZp+8ONj2Dff9983b95/nmHbtsjn8yKVSomAaAcXQRgkgeUzzgCDzNtgx69gPB4XkUhECCkgk8n4jbsMVkEB2OATRYgAAe84VvIc9HgNTCaTTu8T8sI0Ta8xvWxeA+bBGngDfgUIkE2vgyjoB7cpIg6euAeGQiHeARXZbLa4UA2nTzbrE5WHnMEfnJU69w/pdNrpbfrceIEsgmdVCMiBx6AFdHsN8BPQyLwhqo+XzE0qAviAxG8NAqyimmUJsF2rutowimqWJeDQ4sgL0PkIRCVroKBBQKGSNVDL/FmDgC/MYRUBA8ybGgRsMV8tR8BJcBPc4Q72VoOA92AK3AD3imdiT8AlIC3xNRgF9ylCVzwAd8EwezylT/wVIM2nHpzl9XdNC9Ad31jzDHvVugXIPT8GItKoOP0zGps/Agu05r2Pm/UgO17ha9OmoXk9PeWFih0vMXdrENBJI1pWeQ13mU9rEHCK+auKAEPjVmwG1drPC2wNAuxj7Yb/TYBxAL2U1oB1AAIKKgI+MndoaHye+YOKgB3eMOQqUEk0g1v0gU0VAfI0M85NJMe9/Br38P3Wh5y1K2CMHtMAJl0fJv+Ecza0LM9HPsdmD2nRgodT+a9+Biw0eQZs5XUejIDpkkXGno6AaDQqEomEV8FZulgXOFfmYWWC9i4Psq84/SURi8Wc/EeAAQBfX5MfCgM8cQAAAABJRU5ErkJggg=="},271:function(e,t,n){e.exports=n(559)},276:function(e,t,n){},306:function(e,t){},328:function(e,t){},330:function(e,t){},535:function(e,t,n){},559:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(9),i=n.n(l),c=(n(276),n(76)),o=n(49),s=n.n(o),d=n(115),h=n(249),u=n(250),f=n(266),m=n(251),p=n(267),g=n(25),E=n(116),v=n.n(E),y=n(563),b=n(564),A=n(565),k=n(112),w=n(111),x=n(40),R=n(110),C=n(562),F=n(252),O=n.n(F),I=n(117),T=n.n(I),j={fetchRideRequests:function(){try{var e=T()("http://apis.is/rides/samferda-drivers/"),t=T()("http://apis.is/rides/samferda-passengers/");return Promise.all([t,e])}catch(n){console.error(n)}},fetchURL:function(e){try{var t=T()("https://cors.io/?".concat(e));return Promise.resolve(t)}catch(n){console.error(n)}}},B=n(253),S=n.n(B),U=function(e){var t=S.a.load(e),n=t("tr:nth-child(6)").children()[1].children[0]?t("tr:nth-child(6)").children()[1].children[0].data:void 0,a=t("tr:nth-child(7)").children()[1].children[0]?t("tr:nth-child(7)").children()[1].children[0].data:void 0,l=t("tr:nth-child(8)").children()[1].children[0]?t("tr:nth-child(8)").children()[1].children[0].data:void 0,i=t("tr:nth-child(9)").children()[1].children[0]?t("tr:nth-child(9)").children()[1].children[0].data:void 0,c=t("tr:nth-child(11)").children()[1].children[0]?t("tr:nth-child(11)").children()[1].children[0].data:void 0,o=t("tr:nth-child(12)").children()[1].children[0]?t("tr:nth-child(12)").children()[1].children[0].data:void 0;return r.a.createElement("div",null,n&&r.a.createElement("p",null,r.a.createElement("b",null,"Seats: "),n),a&&r.a.createElement("p",null,r.a.createElement("b",null,"Name: ")," ",a),l&&r.a.createElement("p",null,r.a.createElement("b",null,"Phone: "),l),i&&r.a.createElement("p",null,r.a.createElement("b",null,"Mobile: "),i),c&&r.a.createElement("p",null,r.a.createElement("b",null,"Non Smoke Car: "),c),o&&r.a.createElement("p",null,r.a.createElement("b",null,"Notes: "),o))},D=n(560),M=n(561),N=[{title:"From",dataIndex:"from",key:"from"},{title:"To",dataIndex:"to",key:"to"},{title:"Date",key:"date",dataIndex:"date"},{title:function(){return r.a.createElement("span",null,r.a.createElement(w.a,{title:"Time"},r.a.createElement(x.a,{type:"clock-circle"})))},key:"time",dataIndex:"time"},{title:"Details",key:"link",dataIndex:"link",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(D.a,{content:t.details?t.details:r.a.createElement(x.a,{type:"loading",style:{fontSize:16},spin:!0})},r.a.createElement(x.a,{type:"info-circle",style:{fontSize:"18px",color:"red"}})),r.a.createElement(M.a,{type:"vertical",style:{backgroundColor:"grey"}}),r.a.createElement("a",{href:t.link,rel:"noopener noreferrer",target:"_blank"},"Samfer\xf0a"))}}],W=(n(535),n(258)),H=n.n(W),L=y.a.Header,P=y.a.Footer,q=y.a.Content,z=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).populateLocations=function(e,t){return e.forEach(function(e){""===e.from||t.find(function(t){return e.from===t})?""===e.to||t.find(function(t){return e.to===t})||t.push(e.to):t.push(e.from)}),t},n.onRadioChange=function(e){var t=n.state,a=t.fetchedRideRequests,r=t.fetchedPassengerRequests;n.selectedFilterFrom=[],n.selectedFilterTo=[],n.setState({filteredTrips:"ride"===e.target.value?a:r,tripFilter:e.target.value})},n.handleRefreshHoverEnter=function(e){n.state.refreshIconClicked||n.setState({refreshIconHover:!0})},n.handleRefreshHoverLeave=function(e){n.setState({refreshIconHover:!1})},n.handleFilterChange=function(e,t){var a=Object(g.a)(Object(g.a)(n)).filterLocations;"from"===t?n.selectedFilterFrom=e:n.selectedFilterTo=e;var r=a(t);n.setState({filteredTrips:r})},n.handleRefreshClick=function(){var e=n.state.refreshIconClicked,t=Object(g.a)(Object(g.a)(n)).fetchData;e||(n.setState({refreshIconClicked:!0},Object(d.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setInterval(function(){n.setState({secondsUntilRefresh:--n.refreshTimer}),0===n.refreshTimer&&clearInterval(t)},1e3);case 2:return t=e.sent,e.next=5,setTimeout(function(){n.refreshTimer=5,n.setState({refreshIconClicked:!1,secondsUntilRefresh:5})},5e3);case 5:case"end":return e.stop()}},e,this)}))),t())},n.filterLocations=function(e){var t=n.state,a=t.tripFilter,r=t.fetchedPassengerRequests,l=t.fetchedRideRequests,i=Object(g.a)(Object(g.a)(n)),c=i.selectedFilterFrom,o=i.selectedFilterTo,s=[],d="ride"===a?l:r;return 0===c.length&&0===o.length?"passenger"===a?r:l:(d.forEach(function(e){0!==c.length&&0!==o.length?c.includes(e.from)&&o.includes(e.to)&&s.push(e):(c.includes(e.from)||o.includes(e.to))&&s.push(e)}),s)},n.fetchData=function(){var e=n.state.tripFilter,t=Object(g.a)(Object(g.a)(n)),a=t.populateLocations,r=t.filterRequestDates;n.selectedFilterFrom=[],n.selectedFilterTo=[],n.setState({tableLoading:!0,refreshIconHover:!1},Object(d.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.fetchRideRequests().then(function(t){var l=t[0].data.results,i=t[1].data.results;i=r(i),l=r(l),Object(c.a)(l).concat(Object(c.a)(i)).forEach(function(e){e.key=e.link});var o=a(Object(c.a)(l).concat(Object(c.a)(i)),[]);n.setState({fetchedPassengerRequests:i,fetchedRideRequests:l,filteredTrips:"passenger"===e?i:l,locations:o.sort(),tableLoading:!1})});case 2:case"end":return t.stop()}},t,this)})))},n.filterRequestDates=function(e){return O.a.remove(e,function(e){return!v()(e.date,"YYYYY-MM-DD").isValid()||v()(e.date,"YYYYY-MM-DD").year()<v()(Date.now()).year()+4})},n.updateWidth=function(){n.setState({windowWidth:window.innerWidth})},n.selectedFilterFrom=[],n.selectedFilterTo=[],n.refreshTimer=5,n.state={tripFilter:"ride",fetchedPassengerRequests:[],fetchedRideRequests:[],locations:[],filteredTrips:[],tableLoading:!0,refreshIconHover:!1,refreshIconClicked:!1,secondsUntilRefresh:5,windowWidth:window.innerWidth},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.filteredTrips,a=t.locations,l=t.tableLoading,i=t.refreshIconHover,c=t.refreshIconClicked,o=t.secondsUntilRefresh,h=this.handleFilterChange,u=this.onRadioChange,f=this.handleRefreshHoverEnter,m=this.handleRefreshHoverLeave,p=this.tripFilter,g=this.selectedFilterFrom,E=this.selectedFilterTo,v=this.handleRefreshClick;return r.a.createElement("div",{className:"App"},r.a.createElement(y.a,{style:{backgroundColor:"grey",minHeight:"100vh",fontSize:"calc(10px + 2vmin)"}},r.a.createElement(L,{style:{backgroundColor:"grey",lineHeight:window.innerWidth<500?"40px":"64px"}},r.a.createElement(b.a,{type:"flex",justify:"center",style:{margin:"10px 0"}},r.a.createElement(A.a,{xs:24,md:20,lg:18,xl:14},r.a.createElement("h1",{style:{margin:"10px 0"}},"Carpooling in Iceland")))),r.a.createElement(q,null,r.a.createElement(b.a,{type:"flex",style:{marginTop:"40px"},align:"middle"},r.a.createElement(A.a,{xs:{span:8,offset:8}},r.a.createElement(k.a.Group,{size:window.innerWidth<600?"small":"large",onChange:u,defaultValue:"ride",buttonStyle:"solid",style:{verticalAlign:"top"}},r.a.createElement(w.a,{title:"Passengers seeking rides"},r.a.createElement(k.a.Button,{value:"ride",checked:"ride"===p},"Ride",r.a.createElement(x.a,{type:"car",style:{marginLeft:"6px"}}))),r.a.createElement(w.a,{title:"Drivers seeking passengers"},r.a.createElement(k.a.Button,{value:"passenger",checked:"passenger"===p},"Passengers",r.a.createElement(x.a,{type:"user-add",style:{marginLeft:"6px"}}))))),r.a.createElement(A.a,{xs:{span:1,offset:7},md:{span:1,offset:5},lg:{span:1,offset:4},xl:{span:1,offset:2}},r.a.createElement(w.a,{title:c?"Available to refresh in ".concat(o,"s"):"Refresh"},r.a.createElement(x.a,{type:"sync",spin:i,style:c?{float:"right",marginRight:"6px",cursor:"not-allowed"}:{float:"right",marginRight:"6px",cursor:"pointer"},onClick:v,onMouseEnter:f,onMouseLeave:m})))),r.a.createElement(b.a,{type:"flex",justify:"center"},r.a.createElement(A.a,{xs:12,md:10,lg:9,xl:7},r.a.createElement(R.a,{mode:"multiple",style:{width:"100%"},placeholder:"From",onChange:function(e){return h(e,"from")},value:g,allowClear:!0,maxTagCount:2,defaultValue:"All"},a.map(function(e){return r.a.createElement(R.a.Option,{key:e},e)}))),r.a.createElement(A.a,{xs:12,md:10,lg:9,xl:7},r.a.createElement(R.a,{mode:"multiple",style:{width:"100%"},placeholder:"To",onChange:function(e){return h(e,"to")},value:E,allowClear:!0,maxTagCount:2},a.map(function(e){return r.a.createElement(R.a.Option,{key:e},e)})))),r.a.createElement(b.a,{type:"flex",justify:"center"},r.a.createElement(A.a,{xs:24,md:20,lg:18,xl:14},r.a.createElement(C.a,{columns:N,dataSource:n,loading:l,style:{backgroundColor:"#e9ebee"},size:window.innerWidth<600?"small":"default",onRow:function(t){return{onMouseEnter:function(){var n=Object(d.a)(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.details){n.next=3;break}return n.next=3,j.fetchURL(t.link).then(function(n){t.details=U(n.data),e.forceUpdate()});case 3:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()}}})))),r.a.createElement(P,{style:{bottom:"0",fontSize:"12px",borderTop:"solid 1px black"}},r.a.createElement(b.a,{type:"flex",justify:"center",gutter:16,align:"middle"},r.a.createElement(A.a,{className:"gutter-row",xs:8,md:3},r.a.createElement("a",{className:"footer_link",href:"http://www.samferda.net/",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("i",{className:"fas fa-taxi",style:{fontSize:"2em"}}))),r.a.createElement(A.a,{className:"gutter-row",xs:8,md:3},r.a.createElement("a",{className:"footer_link",href:"https://github.com/erlingde/carpooling",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("i",{className:"fab fa-github",style:{fontSize:"2em"}}))),r.a.createElement(A.a,{className:"gutter-row",xs:8,md:3},r.a.createElement("a",{className:"footer_link",href:"https://www.apis.is",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("img",{src:H.a,alt:"apis.is",style:{height:"1.6em",width:"1.6em",verticalAlign:"sub"}})))))))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWidth),this.fetchData()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWidth)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[271,2,1]]]);
//# sourceMappingURL=main.d38ebe29.chunk.js.map